<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />

    <title>User Manager</title>
    <meta content="" name="description" />
    <meta content="" name="keywords" />

    <!-- Favicons -->
    <link href="assets/img/favicon.png" rel="icon" />
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon" />

    <!-- Google Fonts -->
    <link href="https://fonts.gstatic.com" rel="preconnect" />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
      rel="stylesheet"
    />

    <!-- Vendor CSS Files -->
    <link
      href="assets/vendor/bootstrap/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="assets/vendor/bootstrap-icons/bootstrap-icons.css"
      rel="stylesheet"
    />
    <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet" />
    <link href="assets/vendor/quill/quill.snow.css" rel="stylesheet" />
    <link href="assets/vendor/quill/quill.bubble.css" rel="stylesheet" />
    <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet" />
    <link href="assets/vendor/simple-datatables/style.css" rel="stylesheet" />

    <!-- Template Main CSS File -->
    <link href="assets/css/style.css" rel="stylesheet" />
    <script
      src="https://code.jquery.com/jquery-3.7.1.js"
      integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
      crossorigin="anonymous"
    ></script>

    <!-- =======================================================
  * Template Name: NiceAdmin - v2.2.0
  * Template URL: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
  </head>

  <body>
    <%- include("../../utils/header")%> <%- include("../../utils/side")%>

    <main id="main" class="main">
      <div class="pagetitle">
        <h1>View All Users Added By You</h1>
        <nav>
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="user_dashboard">Home</a></li>
          </ol>
        </nav>
      </div>
      <!-- End Page Title -->

      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Search User</h5> 
  
          <!-- General Form Elements -->
          <div class="card">
            <div class="card-header">
          <form class="row g-3 needs-validation" novalidate action="view_transactions" method="get">
            <div class="col-md-4">
              <label for="validationCustom01" class="form-label">User Name</label>
              <input type="text" class="form-control" id="validationCustom01" value="" name="filtername" placeholder="Search by User Name">
              <div class="valid-feedback">
                Looks good!
              </div>
            </div>
      
            <div class="col-md-3">
              <label for="validationCustom02" class="form-label">User Id</label>
              <input type="number" class="form-control" id="validationCustom02" value="" name="filteruser_id" placeholder="Search by Mobile Number">
              <div class="valid-feedback">
                Looks good!
              </div>
            </div>
            <div class="col-md-3">
                <label for="validationCustom02" class="form-label">Amount</label>
                <input type="number" class="form-control" id="validationCustom02" value="" name="filteramount" placeholder="Search by Mobile Number">
                <div class="valid-feedback">
                  Looks good!
            </div>
            </div>        
          
            <div class="col-md-12 text-center">
              <button type="submit" class="btn btn-primary">Search</button>
              <button type="reset" class="btn btn-secondary">Reset</button>
            </div>
          </form><!-- End Custom Styled Validation -->
          </div></div>

      <section class="section">
        <div class="row">
          <div class="col-lg-12">
            <div class="card">
              <div class="card-body">
                <h1 class="card-title">Transaction Manager</h1>
                <!-- Table with stripped rows -->
                <table class="table datatable">
                  <thead>
                    <tr>
                      <th scope="col">S No.</th>
                      <th scope="col">User Name</th>
                      <th scope="col">User Id</th>
                      <th scope="col">From User</th>
                      <th scope="col">To User</th>
                      <th scope="col">Type</th>
                      <th scope="col">Old Balance</th>
                      <th scope="col">Amount</th>
                      <th scope="col">Updated Balance</th>
                    </tr>
                  </thead>

                  <tbody>
                    <% let i = 1; %> <% for (let dataobj of transaction_data){
                    %>
                    <tr>
                      <th scope="row"><%= i %></th>
                      <td><%= dataobj.userName %></td>
                      <td><%= dataobj.user_id %></td>
                      <td><%= dataobj.entries[0].fromUserName %></td>
                      <td><%= dataobj.entries[0].toUserName %></td>
                      <td><%= dataobj.entries[0].type %></td>
                      <td><%= dataobj.entries[0].oldBalance %></td>
                      <td><%= dataobj.entries[0].amount %></td>
                      <td><%= dataobj.entries[0].updatedBalance %></td>
                    </tr>
                    <% i = i + 1; }%>
                  </tbody>
                </table>
                <!-- End Table with stripped rows -->
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
    <!-- End #main -->

    <%- include("../../utils/footer")%>

    <a
      href="#"
      class="back-to-top d-flex align-items-center justify-content-center"
      ><i class="bi bi-arrow-up-short"></i
    ></a>

    <!-- Vendor JS Files -->
    <script src="assets/vendor/apexcharts/apexcharts.min.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/chart.js/chart.min.js"></script>
    <script src="assets/vendor/echarts/echarts.min.js"></script>
    <script src="assets/vendor/quill/quill.min.js"></script>
    <script src="assets/vendor/simple-datatables/simple-datatables.js"></script>
    <script src="assets/vendor/tinymce/tinymce.min.js"></script>
    <script src="assets/vendor/php-email-form/validate.js"></script>

    <!-- Template Main JS File -->
    <script src="assets/js/main.js"></script>
  </body>
</html>
